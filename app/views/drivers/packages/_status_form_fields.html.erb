<!-- Selector de Estado -->
<div>
  <%= form.label :new_status, "Selecciona el nuevo estado", class: "block text-sm font-medium text-gray-700 mb-3" %>
  <div class="flex flex-wrap gap-4">
    <% status_options = available_status_options_for(package) %>
    <% status_options.each do |option| %>
    <label class="flex items-center gap-2 cursor-pointer">
      <%= form.radio_button :new_status, option[:value],
                           checked: (option[:value] == 'delivered'),
                           onchange: "handleStatusChange('#{option[:value]}')",
                           class: "w-5 h-5 text-blue-600 focus:ring-blue-500 border-gray-300" %>
      <span class="text-base font-medium text-gray-900">
        <%= option[:icon] %> <%= option[:label] %>
      </span>
    </label>
    <% end %>
  </div>
</div>

<!-- Campo de Motivo (condicional) -->
<div id="reason-field" style="display: none">
  <%= form.label :reason, class: "block text-sm font-medium text-gray-700 mb-1" do %>
    Motivo
  <% end %>
  <%= form.text_area :reason, rows: 3, maxlength: 30,
                     class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",
                     placeholder: "Ej: Cliente no disponible...",
                     required: true,
                     oninput: "updateDriverReasonCounter()" %>
  <p class="mt-1 text-xs text-gray-500">
    <span id="driver-reason-counter">0</span>/30 caracteres
  </p>
</div>
