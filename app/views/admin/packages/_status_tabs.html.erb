<%
  # Expected local variables:
  # - status_counts: Hash with status counts (@total_count, @pending_pickup_count, etc.)
  # - current_status: Current selected status from params[:status]
%>

<div class="mt-6 border-b border-gray-200">
  <nav class="-mb-px flex flex-wrap gap-x-8 gap-y-2" aria-label="Tabs">
    <!-- Todos -->
    <%= link_to admin_packages_path({
          date_from: params[:date_from],
          date_to: params[:date_to],
          tracking_query: params[:tracking_query],
          commune_ids: params[:commune_ids],
          courier_ids: params[:courier_ids]
        }.compact),
        data: { turbo_prefetch: false },
        class: "#{current_status.blank? ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" do %>
      Todos
      <span class="ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium <%= current_status.blank? ? 'bg-indigo-100 text-indigo-600' : 'bg-gray-100 text-gray-900' %>">
        <%= status_counts[:total] %>
      </span>
    <% end %>

    <!-- En Proceso -->
    <%= link_to admin_packages_path(filter_params_with_status('pending_pickup')),
        data: { turbo_prefetch: false },
        class: "#{tab_classes(current_status, 'pending_pickup')} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" do %>
      <%= status_text(:pending_pickup) %>
      <span class="ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium <%= tab_badge_classes(current_status, 'pending_pickup') %>">
        <%= status_counts[:pending_pickup] %>
      </span>
    <% end %>

    <%= link_to admin_packages_path(filter_params_with_status('in_warehouse')),
        data: { turbo_prefetch: false },
        class: "#{tab_classes(current_status, 'in_warehouse')} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" do %>
      <%= status_text(:in_warehouse) %>
      <span class="ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium <%= tab_badge_classes(current_status, 'in_warehouse') %>">
        <%= status_counts[:in_warehouse] %>
      </span>
    <% end %>

    <%= link_to admin_packages_path(filter_params_with_status('in_transit')),
        data: { turbo_prefetch: false },
        class: "#{tab_classes(current_status, 'in_transit')} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" do %>
      <%= status_text(:in_transit) %>
      <span class="ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium <%= tab_badge_classes(current_status, 'in_transit') %>">
        <%= status_counts[:in_transit] %>
      </span>
    <% end %>

    <!-- Necesitan AtenciÃ³n -->
    <%= link_to admin_packages_path(filter_params_with_status('rescheduled')),
        data: { turbo_prefetch: false },
        class: "#{tab_classes(current_status, 'rescheduled')} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" do %>
      <%= status_text(:rescheduled) %>
      <span class="ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium <%= tab_badge_classes(current_status, 'rescheduled') %>">
        <%= status_counts[:rescheduled] %>
      </span>
    <% end %>

    <%= link_to admin_packages_path(filter_params_with_status('return')),
        data: { turbo_prefetch: false },
        class: "#{tab_classes(current_status, 'return')} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" do %>
      <%= status_text(:return) %>
      <span class="ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium <%= tab_badge_classes(current_status, 'return') %>">
        <%= status_counts[:return] %>
      </span>
    <% end %>

    <!-- Terminados -->
    <%= link_to admin_packages_path(filter_params_with_status('delivered')),
        data: { turbo_prefetch: false },
        class: "#{tab_classes(current_status, 'delivered')} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" do %>
      <%= status_text(:delivered) %>
      <span class="ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium <%= tab_badge_classes(current_status, 'delivered') %>">
        <%= status_counts[:delivered] %>
      </span>
    <% end %>

    <%= link_to admin_packages_path(filter_params_with_status('cancelled')),
        data: { turbo_prefetch: false },
        class: "#{tab_classes(current_status, 'cancelled')} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" do %>
      <%= status_text(:cancelled) %>
      <span class="ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium <%= tab_badge_classes(current_status, 'cancelled') %>">
        <%= status_counts[:cancelled] %>
      </span>
    <% end %>
  </nav>
</div>
