<div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-4 overflow-hidden">
  <!-- Header del resumen -->
  <div class="flex items-center justify-between px-4 py-3 bg-gray-50 border-b border-gray-200">
    <div class="flex items-center gap-2">
      <span class="text-lg"></span>
      <h3 class="text-sm font-semibold text-gray-700">
        RESUMEN DEL DA
        <% if @date_from.present? %>
          (<%= @date_from.strftime('%d/%m/%Y') %>
          <% if @date_to != @date_from %>
            - <%= @date_to.strftime('%d/%m/%Y') %>
          <% end %>)
        <% else %>
          (<%= Date.current.strftime('%d/%m/%Y') %>)
        <% end %>
      </h3>
    </div>

    <!-- Bot贸n Actualizar -->
    <%= button_to admin_packages_path(@filter_params),
        method: :get,
        class: "inline-flex items-center gap-1 px-3 py-1 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50" do %>
       Actualizar
    <% end %>
  </div>

  <!-- Contadores -->
  <div class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-4 lg:grid-cols-8 gap-px bg-gray-200">
    <!-- Total -->
    <div class="bg-white px-4 py-3 text-center">
      <div class="text-xs font-medium text-gray-500 uppercase mb-1">Total</div>
      <div class="text-2xl font-bold text-gray-900"><%= @total_count %></div>
    </div>

    <!-- Pendiente Retiro -->
    <div class="bg-white px-4 py-3 text-center">
      <div class="text-xs font-medium text-gray-500 uppercase mb-1">Pendiente</div>
      <div class="text-2xl font-bold" style="color: var(--color-status-pending-text)">
        <%= @pending_pickup_count %>
      </div>
    </div>

    <!-- Bodega -->
    <div class="bg-white px-4 py-3 text-center">
      <div class="text-xs font-medium text-gray-500 uppercase mb-1">Bodega</div>
      <div class="text-2xl font-bold" style="color: var(--color-status-warehouse-text)">
        <%= @in_warehouse_count %>
      </div>
    </div>

    <!-- En Camino -->
    <div class="bg-white px-4 py-3 text-center">
      <div class="text-xs font-medium text-gray-500 uppercase mb-1">En Camino</div>
      <div class="text-2xl font-bold" style="color: var(--color-status-transit-text)">
        <%= @in_transit_count %>
      </div>
    </div>

    <!-- Entregados -->
    <div class="bg-white px-4 py-3 text-center">
      <div class="text-xs font-medium text-gray-500 uppercase mb-1">Entregados</div>
      <div class="text-2xl font-bold" style="color: var(--color-status-delivered-text)">
        <%= @delivered_count %>
      </div>
    </div>

    <!-- Reprogramados (PERSISTENTES) -->
    <div class="bg-white px-4 py-3 text-center relative">
      <div class="text-xs font-medium text-gray-500 uppercase mb-1">
        Reprogramados
        <% if @persistent_rescheduled_count > @rescheduled_count %>
          <span class="text-orange-600 text-[10px]" title="Incluye <%= @persistent_rescheduled_count - @rescheduled_count %> hist贸ricos">
            *
          </span>
        <% end %>
      </div>
      <div class="text-2xl font-bold" style="color: var(--color-status-rescheduled-text)">
        <%= @persistent_rescheduled_count %>
      </div>
      <% if @persistent_rescheduled_count > @rescheduled_count %>
        <div class="text-[10px] text-orange-600 mt-1">
          (+<%= @persistent_rescheduled_count - @rescheduled_count %> hist贸ricos)
        </div>
      <% end %>
    </div>

    <!-- Devoluci贸n -->
    <div class="bg-white px-4 py-3 text-center">
      <div class="text-xs font-medium text-gray-500 uppercase mb-1">Devoluci贸n</div>
      <div class="text-2xl font-bold" style="color: var(--color-status-return-text)">
        <%= @return_count %>
      </div>
    </div>

    <!-- Cancelados -->
    <div class="bg-white px-4 py-3 text-center">
      <div class="text-xs font-medium text-gray-500 uppercase mb-1">Cancelados</div>
      <div class="text-2xl font-bold" style="color: var(--color-status-cancelled-text)">
        <%= @cancelled_count %>
      </div>
    </div>
  </div>
</div>
