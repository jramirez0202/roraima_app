<div class="px-4 sm:px-0">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-900">Mi Perfil</h1>
    <%= link_to "Editar Perfil", edit_drivers_profile_path, class: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
  </div>

  <div class="bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden">
    <!-- Información Personal -->
    <div class="px-6 py-4 border-b border-gray-200">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">Información Personal</h2>
      <dl class="grid grid-cols-1 gap-4 sm:grid-cols-2">
        <div>
          <dt class="text-sm font-medium text-gray-500">Nombre Completo</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @driver.full_name %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">RUT</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @driver.rut %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Email</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @driver.email %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Teléfono</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @driver.phone || 'No especificado' %></dd>
        </div>
      </dl>
    </div>

    <!-- Información del Vehículo -->
    <div class="px-6 py-4 border-b border-gray-200">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">Información del Vehículo</h2>
      <dl class="grid grid-cols-1 gap-4 sm:grid-cols-3">
        <div>
          <dt class="text-sm font-medium text-gray-500">Patente</dt>
          <dd class="mt-1 text-sm text-gray-900 font-mono"><%= @driver.vehicle_plate %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Modelo</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @driver.vehicle_model %></dd>
        </div>
        <div>
          <dt class="text-sm font-medium text-gray-500">Capacidad</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @driver.vehicle_capacity %> kg</dd>
        </div>
      </dl>
    </div>

    <!-- Zona Asignada -->
    <div class="px-6 py-4">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">Zona de Trabajo</h2>
      <dl class="grid grid-cols-1 gap-4">
        <div>
          <dt class="text-sm font-medium text-gray-500">Zona Asignada</dt>
          <dd class="mt-1 text-sm text-gray-900">
            <% if @driver.assigned_zone.present? %>
              <div class="flex items-center">
                <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium">
                  <%= @driver.assigned_zone.name %>
                </span>
              </div>
              <% if @driver.assigned_zone.communes.present? %>
                <div class="mt-2 text-xs text-gray-600">
                  <strong>Comunas:</strong> <%= @driver.assigned_zone.commune_names.join(', ') %>
                </div>
              <% end %>
            <% else %>
              <span class="text-gray-400">Sin zona asignada</span>
            <% end %>
          </dd>
        </div>
      </dl>
    </div>
  </div>

  <!-- Estadísticas Generales -->
  <div class="mt-6 bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-200">
      <h2 class="text-lg font-semibold text-gray-900">Mis Estadísticas</h2>
    </div>
    <div class="px-6 py-4">
      <dl class="grid grid-cols-1 gap-4 sm:grid-cols-3">
        <div class="text-center p-4 bg-gray-50 rounded-lg">
          <dt class="text-sm font-medium text-gray-500">Paquetes Asignados</dt>
          <dd class="mt-2 text-3xl font-bold text-gray-900"><%= @driver.visible_packages.count %></dd>
        </div>
        <div class="text-center p-4 bg-green-50 rounded-lg">
          <dt class="text-sm font-medium text-gray-500">Entregados Hoy</dt>
          <dd class="mt-2 text-3xl font-bold text-green-600"><%= @driver.today_deliveries.count %></dd>
        </div>
        <div class="text-center p-4 bg-yellow-50 rounded-lg">
          <dt class="text-sm font-medium text-gray-500">Pendientes</dt>
          <dd class="mt-2 text-3xl font-bold text-yellow-600"><%= @driver.pending_deliveries.count %></dd>
        </div>
      </dl>
    </div>
  </div>

  <!-- Botón Cerrar Sesión - Visible especialmente en móvil -->
  <div class="mt-6 mb-20 md:mb-6">
    <%= button_to destroy_user_session_path,
      method: :delete,
      data: { turbo: false, confirm: "¿Estás seguro de que deseas cerrar sesión?" },
      class: "w-full flex items-center justify-center px-6 py-4 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors shadow-sm" do %>
      <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
      </svg>
      <span class="font-semibold">Cerrar Sesión</span>
    <% end %>
  </div>
</div>
